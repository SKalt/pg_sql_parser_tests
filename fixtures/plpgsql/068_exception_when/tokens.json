[
  {
    "Name": "CREATE",
    "Start": 0,
    "End": 6,
    "Text": "CREATE"
  },
  {
    "Name": "TABLE",
    "Start": 7,
    "End": 12,
    "Text": "TABLE"
  },
  {
    "Name": "IDENT",
    "Start": 13,
    "End": 15,
    "Text": "db"
  },
  {
    "Name": "ASCII_40",
    "Start": 16,
    "End": 17,
    "Text": "("
  },
  {
    "Name": "IDENT",
    "Start": 17,
    "End": 18,
    "Text": "a"
  },
  {
    "Name": "INT_P",
    "Start": 19,
    "End": 22,
    "Text": "INT"
  },
  {
    "Name": "PRIMARY",
    "Start": 23,
    "End": 30,
    "Text": "PRIMARY"
  },
  {
    "Name": "KEY",
    "Start": 31,
    "End": 34,
    "Text": "KEY"
  },
  {
    "Name": "ASCII_44",
    "Start": 34,
    "End": 35,
    "Text": ","
  },
  {
    "Name": "IDENT",
    "Start": 36,
    "End": 37,
    "Text": "b"
  },
  {
    "Name": "TEXT_P",
    "Start": 38,
    "End": 42,
    "Text": "TEXT"
  },
  {
    "Name": "ASCII_41",
    "Start": 42,
    "End": 43,
    "Text": ")"
  },
  {
    "Name": "ASCII_59",
    "Start": 43,
    "End": 44,
    "Text": ";"
  },
  {
    "Name": "CREATE",
    "Start": 46,
    "End": 52,
    "Text": "CREATE"
  },
  {
    "Name": "FUNCTION",
    "Start": 53,
    "End": 61,
    "Text": "FUNCTION"
  },
  {
    "Name": "IDENT",
    "Start": 62,
    "End": 70,
    "Text": "merge_db"
  },
  {
    "Name": "ASCII_40",
    "Start": 70,
    "End": 71,
    "Text": "("
  },
  {
    "Name": "KEY",
    "Start": 71,
    "End": 74,
    "Text": "key"
  },
  {
    "Name": "INT_P",
    "Start": 75,
    "End": 78,
    "Text": "INT"
  },
  {
    "Name": "ASCII_44",
    "Start": 78,
    "End": 79,
    "Text": ","
  },
  {
    "Name": "DATA_P",
    "Start": 80,
    "End": 84,
    "Text": "data"
  },
  {
    "Name": "TEXT_P",
    "Start": 85,
    "End": 89,
    "Text": "TEXT"
  },
  {
    "Name": "ASCII_41",
    "Start": 89,
    "End": 90,
    "Text": ")"
  },
  {
    "Name": "RETURNS",
    "Start": 91,
    "End": 98,
    "Text": "RETURNS"
  },
  {
    "Name": "IDENT",
    "Start": 99,
    "End": 103,
    "Text": "VOID"
  },
  {
    "Name": "AS",
    "Start": 104,
    "End": 106,
    "Text": "AS"
  },
  {
    "Name": "SCONST",
    "Start": 107,
    "End": 648,
    "Text": "$$\nBEGIN\n    LOOP\n        -- first try to update the key\n        UPDATE db SET b = data WHERE a = key;\n        IF found THEN\n            RETURN;\n        END IF;\n        -- not there, so try to insert the key\n        -- if someone else inserts the same key concurrently,\n        -- we could get a unique-key failure\n        BEGIN\n            INSERT INTO db(a,b) VALUES (key, data);\n            RETURN;\n        EXCEPTION WHEN unique_violation THEN\n            -- Do nothing, and loop to try the UPDATE again.\n        END;\n    END LOOP;\nEND;\n$$"
  },
  {
    "Name": "LANGUAGE",
    "Start": 649,
    "End": 657,
    "Text": "LANGUAGE"
  },
  {
    "Name": "IDENT",
    "Start": 658,
    "End": 665,
    "Text": "plpgsql"
  },
  {
    "Name": "ASCII_59",
    "Start": 665,
    "End": 666,
    "Text": ";"
  },
  {
    "Name": "SELECT",
    "Start": 668,
    "End": 674,
    "Text": "SELECT"
  },
  {
    "Name": "IDENT",
    "Start": 675,
    "End": 683,
    "Text": "merge_db"
  },
  {
    "Name": "ASCII_40",
    "Start": 683,
    "End": 684,
    "Text": "("
  },
  {
    "Name": "ICONST",
    "Start": 684,
    "End": 685,
    "Text": "1"
  },
  {
    "Name": "ASCII_44",
    "Start": 685,
    "End": 686,
    "Text": ","
  },
  {
    "Name": "SCONST",
    "Start": 687,
    "End": 694,
    "Text": "'david'"
  },
  {
    "Name": "ASCII_41",
    "Start": 694,
    "End": 695,
    "Text": ")"
  },
  {
    "Name": "ASCII_59",
    "Start": 695,
    "End": 696,
    "Text": ";"
  },
  {
    "Name": "SELECT",
    "Start": 697,
    "End": 703,
    "Text": "SELECT"
  },
  {
    "Name": "IDENT",
    "Start": 704,
    "End": 712,
    "Text": "merge_db"
  },
  {
    "Name": "ASCII_40",
    "Start": 712,
    "End": 713,
    "Text": "("
  },
  {
    "Name": "ICONST",
    "Start": 713,
    "End": 714,
    "Text": "1"
  },
  {
    "Name": "ASCII_44",
    "Start": 714,
    "End": 715,
    "Text": ","
  },
  {
    "Name": "SCONST",
    "Start": 716,
    "End": 724,
    "Text": "'dennis'"
  },
  {
    "Name": "ASCII_41",
    "Start": 724,
    "End": 725,
    "Text": ")"
  },
  {
    "Name": "ASCII_59",
    "Start": 725,
    "End": 726,
    "Text": ";"
  }
]