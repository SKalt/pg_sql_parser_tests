[
  {
    "Name": "CREATE",
    "Start": 0,
    "End": 6,
    "Text": "CREATE"
  },
  {
    "Name": "OR",
    "Start": 7,
    "End": 9,
    "Text": "OR"
  },
  {
    "Name": "REPLACE",
    "Start": 10,
    "End": 17,
    "Text": "REPLACE"
  },
  {
    "Name": "FUNCTION",
    "Start": 18,
    "End": 26,
    "Text": "FUNCTION"
  },
  {
    "Name": "IDENT",
    "Start": 27,
    "End": 37,
    "Text": "no_rewrite"
  },
  {
    "Name": "ASCII_40",
    "Start": 37,
    "End": 38,
    "Text": "("
  },
  {
    "Name": "ASCII_41",
    "Start": 38,
    "End": 39,
    "Text": ")"
  },
  {
    "Name": "RETURNS",
    "Start": 41,
    "End": 48,
    "Text": "RETURNS"
  },
  {
    "Name": "IDENT",
    "Start": 49,
    "End": 62,
    "Text": "event_trigger"
  },
  {
    "Name": "LANGUAGE",
    "Start": 64,
    "End": 72,
    "Text": "LANGUAGE"
  },
  {
    "Name": "IDENT",
    "Start": 73,
    "End": 80,
    "Text": "plpgsql"
  },
  {
    "Name": "AS",
    "Start": 81,
    "End": 83,
    "Text": "AS"
  },
  {
    "Name": "SCONST",
    "Start": 84,
    "End": 1029,
    "Text": "$$\n---\n--- Implement local Table Rewriting policy:\n---   public.foo is not allowed rewriting, ever\n---   other tables are only allowed rewriting between 1am and 6am\n---   unless they have more than 100 blocks\n---\nDECLARE\n  table_oid oid := pg_event_trigger_table_rewrite_oid();\n  current_hour integer := extract('hour' from current_time);\n  pages integer;\n  max_pages integer := 100;\nBEGIN\n  IF pg_event_trigger_table_rewrite_oid() = 'public.foo'::regclass\n  THEN\n        RAISE EXCEPTION 'you''re not allowed to rewrite the table %',\n                        table_oid::regclass;\n  END IF;\n\n  SELECT INTO pages relpages FROM pg_class WHERE oid = table_oid;\n  IF pages \u003e max_pages\n  THEN\n        RAISE EXCEPTION 'rewrites only allowed for table with less than % pages',\n                        max_pages;\n  END IF;\n\n  IF current_hour NOT BETWEEN 1 AND 6\n  THEN\n        RAISE EXCEPTION 'rewrites only allowed between 1am and 6am';\n  END IF;\nEND;\n$$"
  },
  {
    "Name": "ASCII_59",
    "Start": 1029,
    "End": 1030,
    "Text": ";"
  },
  {
    "Name": "CREATE",
    "Start": 1032,
    "End": 1038,
    "Text": "CREATE"
  },
  {
    "Name": "EVENT",
    "Start": 1039,
    "End": 1044,
    "Text": "EVENT"
  },
  {
    "Name": "TRIGGER",
    "Start": 1045,
    "End": 1052,
    "Text": "TRIGGER"
  },
  {
    "Name": "IDENT",
    "Start": 1053,
    "End": 1071,
    "Text": "no_rewrite_allowed"
  },
  {
    "Name": "ON",
    "Start": 1090,
    "End": 1092,
    "Text": "ON"
  },
  {
    "Name": "IDENT",
    "Start": 1093,
    "End": 1106,
    "Text": "table_rewrite"
  },
  {
    "Name": "EXECUTE",
    "Start": 1110,
    "End": 1117,
    "Text": "EXECUTE"
  },
  {
    "Name": "FUNCTION",
    "Start": 1118,
    "End": 1126,
    "Text": "FUNCTION"
  },
  {
    "Name": "IDENT",
    "Start": 1127,
    "End": 1137,
    "Text": "no_rewrite"
  },
  {
    "Name": "ASCII_40",
    "Start": 1137,
    "End": 1138,
    "Text": "("
  },
  {
    "Name": "ASCII_41",
    "Start": 1138,
    "End": 1139,
    "Text": ")"
  },
  {
    "Name": "ASCII_59",
    "Start": 1139,
    "End": 1140,
    "Text": ";"
  }
]